<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <style type="text/css">
        body > div{
            display: inline-block;
        }
        svg{
            border: 1px solid;
        }
    </style>
</head>
<body>
<div id="container"></div>
<div id="clone"></div>
<script src="../../js/d3.v7.min.js"></script>
<script type="module">


let faithful = [];
for (let i = 0; i<30; i++){
    let xy = {x: Math.random(), y: Math.random()};
    faithful.push(xy);
}

const colors = [ 
    "#213019", "#076a53", "#47aabf", "#0164c6", "#003ea7", "#1b057b", "#b18232", "#a4b700", "#fdfc00", 
    "#fee7a6", "#feffaa", "#4c1613", "#8f372a", "#964e18", "#dea482", "#ffd4b1", "#fec356", "#fcb69c", 
    "#ff8c13", "#e37056", "#ff4a00", "#ca1f0f", "#fc142c", "#f90786", "#ffc0e7", "#e8c6ee", "#d1aee2"
];

// Specify the dimensions of the chart.
    const width = 500;
    const height = 500;

  // Create the horizontal and vertical scales.
    const x = d3.scaleLinear()
        .domain(d3.extent(faithful, d => d.x)).nice()
        .rangeRound([0, width]);

    const y = d3.scaleLinear()
        .domain(d3.extent(faithful, d => d.y)).nice()
        .rangeRound([height, 0]);

    // Compute the density contours.
    const contours = d3.contourDensity()
      .x(d => x(d.x))
      .y(d => y(d.y))
      .size([width, height])
      .bandwidth(50)
      .thresholds(5)
    (faithful);

  // Create the SVG container.
    const svg = d3.create("svg")
        .attr("id", "sketch")
        .attr("width", width)
        .attr("height", height)
        .attr("viewBox", [0, 0, width, height])
        .attr("style", "max-width: 100%; height: auto;");

    // Append the contours.
    svg.append("g")
        .attr("id", "sketch")
        .attr("fill", "none")
        .attr("stroke", "black")
        .attr("stroke-linejoin", "round")
    .selectAll()
    .data(contours)
    .join("path")
        .attr("d", d3.geoPath());
  
    // Append dots.
    svg.append("g")
        .attr("stroke", "white")
    .selectAll()
    .data(faithful)
    .join("circle")
        .attr("cx", d => x(d.x))
        .attr("cy", d => y(d.y))
        .attr("r", 2);

// Append the SVG element.
container.append(svg.node());


let grabsvg = document.querySelector('svg');
let allPaths = grabsvg.querySelectorAll('path');
let selected = allPaths[Math.floor( Math.random() * allPaths.length )];
selected.setAttribute("stroke", "red");
let selectedD = selected.getAttribute("d");


let clonedSvg = d3.create("svg")
        .attr("width", width)
        .attr("height", height)
        .attr("viewBox", [0, 0, width, height])
        .attr("style", "max-width: 100%; height: auto;");

clonedSvg.append("g")
        .attr("fill", "none")
        .attr("stroke", "black")
        .attr("stroke-linejoin", "round")
    .selectAll()
    .data(contours)
    .join("path")
        .attr("stroke-width", 1)
        .attr("fill", colors[Math.floor(Math.random() * colors.length)])
        .attr("d", selectedD);

clone.append(clonedSvg.node());




</script>
</body>
</html>